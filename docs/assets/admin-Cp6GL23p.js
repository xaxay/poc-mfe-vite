import{components as U,useDisplay as k}from"vuetify";import{defineComponent as y,ref as m,openBlock as u,createBlock as f,withCtx as t,createVNode as n,createElementBlock as h,Fragment as V,createTextVNode as _,toDisplayString as d,createCommentVNode as D,renderList as w,onMounted as A,resolveComponent as g,computed as N,onMounted as onM, onUnmounted as onU}from"vue";import{navigateTo as b,getCurrentRoute as I}from"@browser-module/api/nav";import{getUserLogin as C}from"@browser-module/api/user";import{useRoute as M}from"vue-router";import{_ as T}from"./--plugin-vue--export-helper-DlAUqK2U.js";const L=async e=>{if(!e)return[];const a=C();if(!a.includes(e))return[];const s=[{name:e}];return e!==a&&a.includes(e)&&s.unshift({name:a}),s},Q=async e=>{if(!e)return null;const a=C();if(e!=a)return null;const s=["account","rumors","app4","app5","app6","app7","app8","app9","app11","app12","app13","app14","app15","app16","app17","app18"];return e==="admin"&&s.push("admin"),s.sort(R),{name:e,permissions:s}},R=(e,a)=>{const s=/(\D+)(\d+)?/,p=e.match(s),i=a.match(s);if(!p||!i)throw new Error("Unexpected non-matching string format");const[,r,o]=p,[,l,c]=i;return r<l?-1:r>l?1:o!==void 0&&c!==void 0?parseInt(o)-parseInt(c):o!==void 0?-1:c!==void 0?1:0},B=y({name:"SearchUser",setup(){let sE;onM(()=>{sE=document.createElement('style');sE.textContent=`.text-h5[data-v-bcf481a0]{font-weight:500}.text-subtitle-1[data-v-bcf481a0]{font-weight:500;margin-top:16px;display:block}.navigation-drawer[data-v-bcf481a0]{top:0;height:auto}
`;document.head.appendChild(sE);});onU(()=>{if(sE){document.head.removeChild(sE);}});const e=m(""),a=m([]);return{searchQuery:e,users:a,searchUsers:async()=>{e.value.length>2?a.value=await L(e.value):a.value=[]},goToUserDetails:i=>{b({path:`/admin/users/details/${i}`})}}}}),{VTextField:F,VListItemTitle:E,VListItem:P,VList:S,VContainer:j}=U;function z(e,a,s,p,i,r){return u(),f(j,{fluid:""},{default:t(()=>[n(F,{modelValue:e.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=o=>e.searchQuery=o),label:"Input user name",flat:"",clearable:"","prepend-inner-icon":"mdi-magnify",onInput:e.searchUsers},null,8,["modelValue","onInput"]),e.users.length?(u(),h(V,{key:0},[_(" Found user"+d(e.users.length>1?"s":"")+" ",1),e.users.length>1||!e.users.map(o=>o.name).includes(e.searchQuery)?(u(),h(V,{key:0},[_(" with name like *"+d(e.searchQuery)+"* ",1)],64)):D("",!0),n(S,null,{default:t(()=>[(u(!0),h(V,null,w(e.users,o=>(u(),f(P,{key:o.name,onClick:l=>e.goToUserDetails(o.name)},{default:t(()=>[n(E,null,{default:t(()=>[_(d(o.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})],64)):D("",!0)]),_:1})}const W=T(B,[["render",z]]),q=y({name:"UserDetails",setup(){const e=M(),a=m(!1),s=m(null),{mdAndUp:p}=k(),i=m(!1);return A(async()=>{const r=e.params.name;r&&(s.value=await Q(r))}),{drawer:a,userDetails:s,isMdAndUp:p,miniVariant:i}}}),{VListItemTitle:G,VListItem:H,VList:J,VNavigationDrawer:K,VIcon:O,VAvatar:X,VCol:v,VRow:$,VCardTitle:Y,VDivider:Z,VChip:x,VCardText:ee,VCard:te,VContainer:ne,VMain:ae,VApp:re}=U;function oe(e,a,s,p,i,r){const o=g("v-list-item-content"),l=g("v-typography");return u(),f(re,null,{default:t(()=>[n(K,{modelValue:e.drawer,"onUpdate:modelValue":a[0]||(a[0]=c=>e.drawer=c),app:"","mini-variant":e.miniVariant,permanent:"",temporary:!e.isMdAndUp,width:"256","mini-variant-width":"64",class:"navigation-drawer",top:""},{default:t(()=>[n(J,null,{default:t(()=>[n(H,null,{default:t(()=>[n(o,null,{default:t(()=>[n(G,null,{default:t(()=>[_("User Details")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","mini-variant","temporary"]),n(ae,null,{default:t(()=>[n(ne,null,{default:t(()=>[n($,{justify:"center"},{default:t(()=>[n(v,{cols:"12",md:"8"},{default:t(()=>[n(te,{class:"pa-4"},{default:t(()=>[n(Y,null,{default:t(()=>[n($,{align:"center"},{default:t(()=>[n(v,{cols:"auto"},{default:t(()=>[n(X,{size:"48"},{default:t(()=>[n(O,null,{default:t(()=>[_("mdi-account")]),_:1})]),_:1})]),_:1}),n(v,null,{default:t(()=>[n(l,{variant:"h5"},{default:t(()=>[_(d(e.userDetails?.name),1)]),_:1})]),_:1})]),_:1})]),_:1}),n(Z),n(ee,null,{default:t(()=>[n($,null,{default:t(()=>[n(v,{cols:"12"},{default:t(()=>[n(l,{variant:"subtitle1"},{default:t(()=>[_("Permissions:")]),_:1})]),_:1})]),_:1}),n($,null,{default:t(()=>[(u(!0),h(V,null,w(e.userDetails?.permissions,c=>(u(),f(v,{key:c,cols:"auto"},{default:t(()=>[n(x,null,{default:t(()=>[_(d(c),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const se=T(q,[["render",oe],["__scopeId","data-v-bcf481a0"]]);function ye(e){return[{path:"users",component:W,alias:["","users"]},{path:"users/details/:name",component:se},{path:":pathMatch(.*)*",redirect:`${e}/users`}]}const le=y({name:"Admin",setup(){const e=m(!0),a=C(),s=N(()=>[{title:"Users",icon:"mdi-account-search-outline",exact:!0,path:"/admin/users",alias:"/admin"},{title:"User",icon:"mdi-account-outline",exact:!1,path:"/admin/users/details/",pathClcik:`/admin/users/details/${a}`,altTitle:"User (Me)"}]);function p(r){const o=I().path;return r.exact?!!(o===r.path||r.alias&&o===r.alias):!!o.startsWith(r.path)}function i(r){const o=I().path;return r.pathClcik&&o===r.pathClcik&&r.altTitle||r.title}return{drawer:e,items:s,isActive:p,getTitle:i}}}),{VIcon:ie,VListItemTitle:ue,VListItem:pe,VList:ce,VNavigationDrawer:_e,VMain:de,VApp:me}=U;function fe(e,a,s,p,i,r){const o=g("router-view");return u(),f(me,null,{default:t(()=>[n(_e,{modelValue:e.drawer,"onUpdate:modelValue":a[0]||(a[0]=l=>e.drawer=l),app:"",permanent:""},{default:t(()=>[n(ce,{dense:""},{default:t(()=>[(u(!0),h(V,null,w(e.items,(l,c)=>(u(),f(pe,{key:c,to:l.pathClcik||l.path,router:"",active:e.isActive(l)},{prepend:t(()=>[n(ie,null,{default:t(()=>[_(d(l.icon),1)]),_:2},1024)]),default:t(()=>[n(ue,null,{default:t(()=>[_(d(e.getTitle(l)),1)]),_:2},1024)]),_:2},1032,["to","active"]))),128))]),_:1})]),_:1},8,["modelValue"]),n(de,null,{default:t(()=>[n(o)]),_:1})]),_:1})}const we=T(le,[["render",fe]]);export{ye as createRouteChildren,we as default};
