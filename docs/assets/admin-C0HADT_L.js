import{components as $}from"vuetify";import{defineComponent as U,ref as g,openBlock as i,createBlock as m,withCtx as t,createTextVNode as u,createVNode as n,createElementBlock as h,Fragment as V,toDisplayString as d,createCommentVNode as D,renderList as C,onMounted as I,onBeforeUnmount as b,computed as L,resolveComponent as N}from"vue";import{navigateTo as A,getCurrentRoute as k}from"@browser-module/api/nav";import{getUserLogin as T}from"@browser-module/api/user";import{useRoute as S}from"vue-router";import{_ as y}from"./--plugin-vue--export-helper-DlAUqK2U.js";const B=async e=>{if(!e)return[];const r=T();if(!r.includes(e))return[];const a=[{name:e}];return e!==r&&r.includes(e)&&a.unshift({name:r}),a},M=async e=>{if(!e)return null;const r=T();if(e!=r)return null;const a=["account","rumors","app4","app5","app6","app7","app8","app9","app11","app12","app13","app14","app15","app16","app17","app18"];return e==="admin"&&a.push("admin"),a.sort(Q),{name:e,permissions:a}},Q=(e,r)=>{const a=/(\D+)(\d+)?/,c=e.match(a),p=r.match(a);if(!c||!p)throw new Error("Unexpected non-matching string format");const[,_,o]=c,[,l,s]=p;return _<l?-1:_>l?1:o!==void 0&&s!==void 0?parseInt(o)-parseInt(s):o!==void 0?-1:s!==void 0?1:0},E=U({name:"SearchUser",setup(){const e=g(""),r=g([]);return{searchQuery:e,users:r,searchUsers:async()=>{e.value.length>2?r.value=await B(e.value):r.value=[]},goToUserDetails:p=>{A({path:`/admin/users/details/${p}`})}}}}),{VTextField:R,VListItemTitle:z,VListItem:F,VList:P,VContainer:W}=$;function j(e,r,a,c,p,_){return i(),m(W,{fluid:""},{default:t(()=>[u(" Search: "),n(R,{modelValue:e.searchQuery,"onUpdate:modelValue":r[0]||(r[0]=o=>e.searchQuery=o),label:"Input user name",flat:"",clearable:"","prepend-inner-icon":"mdi-magnify",onInput:e.searchUsers},null,8,["modelValue","onInput"]),e.users.length?(i(),h(V,{key:0},[u(" Found user"+d(e.users.length>1?"s":"")+" ",1),e.users.length>1||!e.users.map(o=>o.name).includes(e.searchQuery)?(i(),h(V,{key:0},[u(" with name like *"+d(e.searchQuery)+"* ",1)],64)):D("",!0),n(P,null,{default:t(()=>[(i(!0),h(V,null,C(e.users,o=>(i(),m(F,{key:o.name,onClick:l=>e.goToUserDetails(o.name)},{default:t(()=>[n(z,null,{default:t(()=>[u(d(o.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})],64)):D("",!0)]),_:1})}const q=y(E,[["render",j]]),G=U({name:"UserDetails",setup(){const e=S(),r=g(null);return I(async()=>{const a=e.params.name;a&&(r.value=await M(a))}),{userDetails:r}}}),{VIcon:H,VAvatar:J,VCol:v,VRow:w,VCardTitle:K,VDivider:O,VChip:X,VCardText:Y,VCard:Z,VContainer:x}=$;function ee(e,r,a,c,p,_){return i(),m(x,null,{default:t(()=>[n(w,{justify:"center"},{default:t(()=>[n(v,{cols:"12"},{default:t(()=>[n(Z,{class:"pa-2"},{default:t(()=>[n(K,null,{default:t(()=>[n(w,{align:"center"},{default:t(()=>[n(v,{cols:"auto"},{default:t(()=>[n(J,null,{default:t(()=>[n(H,null,{default:t(()=>[u("mdi-account")]),_:1})]),_:1})]),_:1}),n(v,null,{default:t(()=>[u(d(e.userDetails?.name),1)]),_:1})]),_:1})]),_:1}),n(O),n(Y,null,{default:t(()=>[n(w,null,{default:t(()=>[n(v,{cols:"12"},{default:t(()=>[u(" Permissions: ")]),_:1})]),_:1}),n(w,null,{default:t(()=>[(i(!0),h(V,null,C(e.userDetails?.permissions,o=>(i(),m(v,{key:o,cols:"auto"},{default:t(()=>[n(X,null,{default:t(()=>[u(d(o),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const te=y(G,[["render",ee]]);function we(e){return[{path:"users",component:q,alias:["","users"]},{path:"users/details/:name",component:te},{path:":pathMatch(.*)*",redirect:`${e}/users`}]}const ne=U({name:"Admin",setup(){const e=g(!0),r=T(),a=g(window.innerWidth>=1024),c=()=>{a.value=window.innerWidth>=1024};I(()=>{window.addEventListener("resize",c)}),b(()=>{window.removeEventListener("resize",c)});const p=L(()=>[{title:"Users",icon:"mdi-account-search-outline",exact:!0,path:"/admin/users",alias:"/admin"},{title:"User",icon:"mdi-account-outline",exact:!1,path:"/admin/users/details/",pathClcik:`/admin/users/details/${r}`,altTitle:"User (Me)"}]);function _(s){const f=k().path;return s.exact?!!(f===s.path||s.alias&&f===s.alias):!!f.startsWith(s.path)}function o(s){const f=k().path;return s.pathClcik&&f===s.pathClcik&&s.altTitle||s.title}function l(){e.value=!e.value}return{drawer:e,items:p,isActive:_,getTitle:o,toggleDrawer:l,isLargeScreen:a}}}),{VAppBarNavIcon:re,VToolbarTitle:ae,VAppBar:oe,VIcon:se,VListItemTitle:le,VListItem:ie,VList:ue,VNavigationDrawer:ce,VMain:pe,VApp:_e}=$;function de(e,r,a,c,p,_){const o=N("router-view");return i(),m(_e,null,{default:t(()=>[n(oe,{app:""},{default:t(()=>[n(re,{onClick:e.toggleDrawer},null,8,["onClick"]),n(ae,null,{default:t(()=>[u("Admin Panel")]),_:1})]),_:1}),n(ce,{modelValue:e.drawer,"onUpdate:modelValue":r[0]||(r[0]=l=>e.drawer=l),app:"",clipped:e.isLargeScreen,permanent:e.isLargeScreen},{default:t(()=>[n(ue,{dense:""},{default:t(()=>[(i(!0),h(V,null,C(e.items,(l,s)=>(i(),m(ie,{key:s,to:l.pathClcik||l.path,router:"",active:e.isActive(l)},{prepend:t(()=>[n(se,null,{default:t(()=>[u(d(l.icon),1)]),_:2},1024)]),default:t(()=>[n(le,null,{default:t(()=>[u(d(e.getTitle(l)),1)]),_:2},1024)]),_:2},1032,["to","active"]))),128))]),_:1})]),_:1},8,["modelValue","clipped","permanent"]),n(pe,null,{default:t(()=>[n(o)]),_:1})]),_:1})}const $e=y(ne,[["render",de]]);export{we as createRouteChildren,$e as default};
