import{createRouter as n,createWebHistory as a}from"vue-router";import i from"@browser-module/config/routes";import{isLogined as h}from"@browser-module/api/user";const s="/poc-mfe-vite/",c=Object.entries(i.routes),r=c.map(([e,t])=>({path:e,component:()=>import(t.module),meta:{title:t.title,requiresAuth:t.requiresAuth===void 0||t.requiresAuth}})),o=i.defaultPath;o&&r.push({path:"/:pathMatch(.*)*",redirect:o||"/"});console.log("baseUrl",s,"top level routes:",r);const p=n({history:a(s),routes:r});p.beforeEach((e,t,u)=>{r.some(l=>l.path===e.path)?(console.log("[router]",e?.path,"<=",t?.path),e.meta.requiresAuth&&!h()?(console.log("[router] requires auth, redirecting to login, back-url:",e.fullPath),u({path:"/login",query:{back:e.fullPath}})):u()):(console.log("[router] unknown path:",e.path,"redirecting to default path:",o||"/"),u(o||"/"))});export{o as defaultRoutePath,p as router};
